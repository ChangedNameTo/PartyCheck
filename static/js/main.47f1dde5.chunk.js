(this["webpackJsonpparty-check"]=this["webpackJsonpparty-check"]||[]).push([[0],{177:function(e,t,n){e.exports=n(326)},182:function(e,t,n){},326:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(36),c=n.n(r),i=(n(182),n(341)),o=n(333),u=n(327),s=n(37);var f=function(){return l.a.createElement(i.a,{inverted:!0,raised:!0,vertical:!0,style:{width:"100%",height:"60px",position:"fixed",bottom:0}},l.a.createElement(o.a,{textAlign:"center"},l.a.createElement(u.a,{color:"black",icon:!0,inverted:!0,labelPosition:"left",href:"https://github.com/ChangedNameTo/PartyCheck"},l.a.createElement(s.a,{name:"github"}),"View on Github"),l.a.createElement(u.a,{color:"blue",inverted:!0,icon:!0,labelPosition:"left",href:"https://www.linkedin.com/in/will--mitch/"},l.a.createElement(s.a,{name:"linkedin"}),"Find me on LinkedIn")))},m=n(38),b=n(49),g=n(50),h=n(18),E=n(340),d=n(342),p=n(337),j=n(339),v=n(334);var O=function(e){var t=Object(a.useState)(!1),n=Object(h.a)(t,2),r=n[0],c=n[1];return l.a.createElement(a.Fragment,null,l.a.createElement(p.a.Row,null,l.a.createElement(p.a.Cell,null,e.name),l.a.createElement(p.a.Cell,null),l.a.createElement(p.a.Cell,null,e.fights.length),l.a.createElement(p.a.Cell,{id:"percentage"},e.percentage,"%"),l.a.createElement(p.a.Cell,null,l.a.createElement(u.a,{key:e.name,onClick:function(){c(!r)},fluid:!0,id:"showFightsButton"},"Show Fights ",r?l.a.createElement(s.a,{name:"angle double up"}):l.a.createElement(s.a,{name:"angle double down"})))),function(){if(r)return e.fights.map((function(e,t){var n=new Date(e.realtime).toDateString();return l.a.createElement(p.a.Row,null,l.a.createElement(p.a.Cell,{textAlign:"right"},n),l.a.createElement(p.a.Cell,{id:"job"},e.job),l.a.createElement(p.a.Cell,null,e.zoneName),l.a.createElement(p.a.Cell,null,e.bossPercentage/100,"%"),l.a.createElement(p.a.Cell,null))}))}())};var k=function(e){var t=Object(a.useState)("pulls"),n=Object(h.a)(t,2),r=n[0],c=n[1],u=Object(a.useState)("descending"),s=Object(h.a)(u,2),f=s[0],m=s[1],b=function(e){r!==e?(c(e),m(f)):m("ascending"===f?"descending":"ascending")},g=function(t,n){return[].concat(e.allies).sort((function(e,t){return e[n]-t[n]}))},E="ascending"===f?g(e.allies,r):g(e.percentage,r).reverse();return l.a.createElement(o.a,null,l.a.createElement(p.a,{compact:!0,celled:!0,sortable:!0},l.a.createElement(p.a.Header,null,l.a.createElement(p.a.Row,null,l.a.createElement(p.a.HeaderCell,null,"Name"),l.a.createElement(p.a.HeaderCell,null,"Job"),l.a.createElement(p.a.HeaderCell,{sorted:"pulls"===r?f:null,onClick:function(){return b("pulls")}},"# Pulls"),l.a.createElement(p.a.HeaderCell,{sorted:"percentage"===r?f:null,onClick:function(){return b("percentage")}},"Avg. Boss % (0 is a kill)"),l.a.createElement(p.a.HeaderCell,null,"Actions"))),l.a.createElement(p.a.Body,null,E.length>0&&null!==e.allies?E.map((function(e){return l.a.createElement(O,{key:e.name,name:e.name,pulls:e.pulls,fights:e.fights,percentage:e.percentage})})):null!==e.allies?l.a.createElement(p.a.Row,null,l.a.createElement(p.a.Cell,{colSpan:"4"},l.a.createElement(i.a,null,l.a.createElement(j.a,{active:!0},l.a.createElement(v.a,null))))):void 0)))},C=n(335);var w=function(e){var t=Object(a.useState)(""),n=Object(h.a)(t,2),r=n[0],c=n[1],i=function(e){e!==r&&c(e.value)};return l.a.createElement("div",null,l.a.createElement(C.a,{fluid:!0,action:{color:"green",labelPosition:"left",icon:"search",content:"Search",onClick:function(){return e.onClick(r)}},onChange:function(e,t){return i(t)},icon:"search",iconPosition:"left",name:"fflogslink",placeholder:"Enter your FFLogs Username"}))};var y=function(e){return l.a.createElement(o.a,null,l.a.createElement(u.a,{onClick:e.onClick},"Options ",e.visible?l.a.createElement(s.a,{name:"angle double up"}):l.a.createElement(s.a,{name:"angle double down"})))},S=n(343),F=n(338);var x=function(e){var t=function(t){t!==e.options.kills&&e.setOptions({fights:e.options.fights,jobs:e.options.jobs,kills:t})};return e.visible?l.a.createElement(d.a,null,l.a.createElement(d.a.Row,null,l.a.createElement(d.a.Column,{width:5},l.a.createElement(i.a.Group,{vertical:"true"},l.a.createElement(i.a,null,l.a.createElement(S.a,{as:"h4"},"Fights")),l.a.createElement(i.a,null,l.a.createElement(F.a,{placeholder:"Fight Names",id:"fightFilterSelect",fluid:!0,multiple:!0,selection:!0,search:!0,onChange:function(t,n){return function(t){t!==e.options.fights&&e.setOptions({fights:t,jobs:e.options.jobs,kills:e.options.kills})}(n)},options:e.fightChoices})))),l.a.createElement(d.a.Column,{width:6},l.a.createElement(i.a.Group,{vertical:"true"},l.a.createElement(i.a,null,l.a.createElement(S.a,{as:"h4"},"Jobs")),l.a.createElement(i.a,null,l.a.createElement(F.a,{placeholder:"Job Names",id:"jobFilterSelect",fluid:!0,multiple:!0,search:!0,selection:!0,onChange:function(t,n){return function(t){t!==e.options.jobs&&e.setOptions({fights:e.options.fights,jobs:t,kills:e.options.kills})}(n)},options:e.jobChoices})))),l.a.createElement(d.a.Column,{width:5},l.a.createElement(i.a.Group,{vertical:"true"},l.a.createElement(i.a,null,l.a.createElement(S.a,{as:"h4"},"Kills")),l.a.createElement(i.a,null,l.a.createElement(u.a.Group,null,l.a.createElement(u.a,{color:0===e.options.kills?"green":"grey",onClick:function(){return t(0)}},"Kills"),l.a.createElement(u.a.Or,null),l.a.createElement(u.a,{color:1===e.options.kills?"yellow":"grey",onClick:function(){return t(1)}},"All"),l.a.createElement(u.a.Or,null),l.a.createElement(u.a,{color:2===e.options.kills?"red":"grey",onClick:function(){return t(2)}},"Wipes"))))))):l.a.createElement(a.Fragment,null)},P=n(305).default,A="57867123b1f24ca0a00384cdb92cc4c7";var N=function(){var e=Object(a.useState)(null),t=Object(h.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),u=Object(h.a)(c,2),s=u[0],f=u[1],p=Object(a.useState)(null),j=Object(h.a)(p,2),v=j[0],O=j[1],C=Object(a.useState)(!1),S=Object(h.a)(C,2),F=S[0],N=S[1],H=Object(a.useState)(!1),R=Object(h.a)(H,2),B=R[0],G=R[1],J=Object(a.useState)({fights:[],jobs:[],kills:1}),L=Object(h.a)(J,2),M=L[0],I=L[1],W=Object(a.useState)([]),z=Object(h.a)(W,2),_=z[0],D=z[1],K=Object(a.useState)([]),T=Object(h.a)(K,2),V=T[0],U=T[1],Y=Object(a.useState)([]),$=Object(h.a)(Y,2),q=$[0],Q=$[1];return Object(a.useEffect)((function(){n&&P.get("https://www.fflogs.com/v1/reports/user/".concat(n,"?api_key=").concat(A)).then((function(e){f(e)})).catch((function(e){console.log(e),f(null),N(!0)}))}),[n]),Object(a.useEffect)((function(){if(v){var e=function(e){if(Array.isArray(e))return e;var t=Object.keys(e).reduce((function(t,n){return[].concat(Object(m.a)(t),Object(m.a)(e[n].reduce((function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t.fights.map((function(e){return e.zoneName}))))}),[])))}),[]).filter((function(e,t,n){return n.indexOf(e)===t})).filter((function(e,t,n){return e.includes("(Savage)")||e.includes("(Extreme)")})).map((function(e){return{key:e,text:e,value:e}}));U(t);var n={};return Object.keys(e).filter((function(t){var a=e[t].filter((function(e){if(!(M.fights.value&&M.fights.value.length>0))return e;var t={fights:e.fights.filter((function(e){return-1!==M.fights.value.indexOf(e.zoneName)})),job:e.job};return t.fights.length>0?t:void 0}));a.length>0&&(n[t]=a)})),n},t=function(t){delete t["Limit Break"],delete t["Multiple Players"],delete t["Ground Effect"];var n=function(e){if(Array.isArray(e))return e;var t=Object.keys(e).reduce((function(t,n){return[].concat(Object(m.a)(t),Object(m.a)(e[n].map((function(e){return e.job}))))}),[]).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return{key:e,text:e,value:e}}));Q(t);var n={};return Object.keys(e).filter((function(t){var a=e[t].filter((function(e){return M.jobs.value&&M.jobs.value.length>0?-1!==M.jobs.value.indexOf(e.job)?e:void 0:e}));return a.length>0&&(n[t]=a),null})),n}(t);return function(e){if(Array.isArray(e))return e;var t={};return Object.keys(e).filter((function(n){var a=e[n].map((function(e){if(0===M.kills){var t={fights:e.fights.filter((function(e){return 0===e.bossPercentage})),job:e.job};if(t.fights.length>0)return t}else{if(1===M.kills)return e;var n={fights:e.fights.filter((function(e){return 0!==e.bossPercentage})),job:e.job};if(n.fights.length>0)return n}}));-1===a.indexOf(void 0)&&(t[n]=a)})),t}(e(n))},n=function(e){var n=function(e){return e.flatMap((function(e){return e.friendlies.reduce((function(t,n){return Object(g.a)({},t,Object(b.a)({},n.name,{fights:n.fights.map((function(t){var n=t.id;return Object(g.a)({},e.fights[n-1],{realtime:e.start+e.fights[n-1].start_time})})),job:n.type}))}),{})})).reduce((function(e,t){return Object.keys(t).reduce((function(e,n){return Object(g.a)({},e,Object(b.a)({},n,(e[n]||[]).concat(t[n])))}),e)}),{})}(e),a=t(n);console.log(a);var l=function(e){return Object.keys(e).reduce((function(t,n){return Object(g.a)({},t,Object(b.a)({},n,e[n].flatMap((function(e){return e.fights.map((function(t){return Object(g.a)({},t,{job:e.job})}))}))))}),{})}(a);return Object.keys(l).map((function(e){return{name:e,fights:l[e],percentage:l[e].reduce((function(e,t,n,a){return e+(isNaN(parseInt(t.bossPercentage))?0:parseInt(t.bossPercentage))/100/a.length}),0).toFixed(2),pulls:l[e].length}}))}(v);D(n)}}),[v,D,M]),Object(a.useEffect)((function(){s&&s.data&&Promise.all(s.data.filter((function(e){return"Eden's Verse"===e.title||"Trials (Extreme)"===e.title})).map((function(e){return P.get("https://www.fflogs.com/v1/report/fights/".concat(e.id,"?api_key=").concat(A))}))).then((function(e){var t=e.flatMap((function(e){return e.data}));O(t)}))}),[s]),l.a.createElement(a.Fragment,null,l.a.createElement("br",null),l.a.createElement(o.a,null,l.a.createElement(i.a,null,l.a.createElement(d.a,null,l.a.createElement(d.a.Row,null,l.a.createElement(d.a.Column,{width:13},l.a.createElement(w,{onClick:function(e){return r(e)}})),l.a.createElement(d.a.Column,{width:3},l.a.createElement(y,{visible:B,onClick:function(){return G(!B)}}))),l.a.createElement(d.a.Row,null,l.a.createElement(d.a.Column,{centered:"true"},l.a.createElement(x,{visible:B,reports:s,options:M,fightChoices:V,jobChoices:q,setOptions:function(e){return I(e)}})))))),l.a.createElement("br",null),!F&&v?l.a.createElement(k,{allies:_}):F?l.a.createElement(o.a,null,l.a.createElement(E.a,{error:!0},"You need to enter a valid FFLogs username.")):l.a.createElement(o.a,null,l.a.createElement(E.a,null,l.a.createElement(E.a.Header,null,"Welcome to PartyCheck!"),l.a.createElement("p",null,"Please enter a valid FFLogs username."))),l.a.createElement("br",null))};n(322).config();var H=function(){return l.a.createElement(a.Fragment,null,l.a.createElement(N,null),l.a.createElement(f,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(325);c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[177,1,2]]]);
//# sourceMappingURL=main.47f1dde5.chunk.js.map